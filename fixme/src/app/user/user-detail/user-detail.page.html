<ion-header [translucent]="true">
  <ion-toolbar color="main2">
  <ion-buttons slot="start">
  <ion-menu-button></ion-menu-button>
  </ion-buttons>
  <ion-title class="tituloToolbar">Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="user">

  <ion-grid>

    <ion-row class="first-row">
      <ion-col size="9">
        <ion-title class="nombre">{{user.nombre}}</ion-title>
        <ion-label>Valoración: {{user.valoracion}} <ion-icon style="vertical-align: middle;" color="main2" name="star"></ion-icon></ion-label>
      </ion-col>
      <ion-col size="3">
        <ion-avatar>
          <img style="padding-bottom: 14%" src="{{user.avatar}}">
        </ion-avatar>
      </ion-col>
    </ion-row>

    <ion-row>
      <mgl-map class="map" #MapComponent [style]="'mapbox://styles/mapbox/streets-v11'" [zoom]="[14]" [center]="[user.lng, user.lat]">
        <mgl-marker #marker [lngLat]="[user.lng, user.lat]"></mgl-marker>
        <mgl-popup [marker]="marker">
          You are here
        </mgl-popup>
      </mgl-map>
    </ion-row>

    <ion-item *ngIf="isMe" color="main2" class="subidos" (click)="ocultarEdit()">
      <h4>Editar tu perfil</h4>
      <ion-icon *ngIf="!hideEdit" slot="end" name="caret-up-circle-outline" color="light"></ion-icon>
      <ion-icon *ngIf="hideEdit" slot="end" name="caret-down-circle-outline" color="light"></ion-icon>
    </ion-item>

    <ng-container *ngIf="isMe && !hideEdit">
      <app-profile-form [usuario]="user"></app-profile-form>
    </ng-container>

    <ion-item color="main2" class="subidos" (click)="ocultarProductos()">
      <h4>Productos subidos</h4>
      <ion-icon *ngIf="!hide" slot="end" name="caret-up-circle-outline" color="light"></ion-icon>
      <ion-icon *ngIf="hide" slot="end" name="caret-down-circle-outline" color="light"></ion-icon>
    </ion-item>

    <ion-list *ngIf="!hide">
      <ion-item *ngFor="let p of productos">
        <ion-avatar slot="start" [routerLink]="['/producto/detalle', p._id]">
          <img src="{{p.imagen[0]}}" />
        </ion-avatar>
        <ion-label [routerLink]="['/producto/detalle', p._id]">
          <h2> <b>{{p.nombre}}</b></h2>
          <h2> <b>{{p.precio}} € </b></h2>
        </ion-label>
        <ion-avatar *ngIf="isMe" slot="end">
          <ion-icon style="height: 100%;" name="trash" color="danger"></ion-icon>
        </ion-avatar>
      </ion-item>
    </ion-list>


  </ion-grid>




  <ng-container *ngIf="isMe">

  </ng-container>

  <ng-container *ngIf="!isMe">

  </ng-container>
</ion-content>
